version: '3'
services:
  ros-core:
    image: ros:melodic
    command: roscore
    restart: always
    network_mode: host

  ros-pid:
    build: ../ros-pid/
    command: roslaunch --wait /scripts/frobit.launch
    restart: always
    network_mode: host
    volumes:
     - /home/pi/src/ros-pid/scripts/:/scripts/
  
  ros-frobit-driver:
    build: ../ros-frobit-driver/
    command: stdbuf -o L python /scripts/frobit_node.py
    restart: always
    network_mode: host
    privileged: true
    volumes:
     - /home/pi/src/ros-frobit-driver/scripts/:/scripts/
     - /sys/class/:/sys/class/
